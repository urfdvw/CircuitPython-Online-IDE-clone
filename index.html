<!DOCTYPE html>
<head>
    <title>CircuitPython Online IDE</title>
    <meta name="description"
        content="A browser-based IDE for CircuitPython supported microcontrollers. No installation needed. Handy and powerful.">
    <meta name="keywords" content="CircuitPython, IDE, editor, education, DIY, Python, Serial">
    <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">

    <link rel="stylesheet" href="style/workflow.css">

    <link rel="stylesheet" href="style/layoutbase.css">
    <link rel="stylesheet" id="layout_style" href="style/layoutsidebyside.css">

    <link rel="stylesheet" href="style/nav.css">
    <link rel="stylesheet" id="nav_drop" href="style/navhide.css">
    <script async defer src="src/buttons.js"></script>

    <link rel="stylesheet" href="style/setting.css">

    <script src="scripts/tree.js"></script>
    <link rel="stylesheet" href="style/treejs.css" id="treejs_styles">

    <script src="src/ace.js" type="text/javascript" charset="utf-8"></script>
    <script src="src/ext-language_tools.js"></script>

    <script src="src/window.js"></script>
    <link rel="stylesheet" href="style/window.css" />

    <script src='src/plotly-2.4.2.min.js'></script>
</head>
<body>
    <div id="workflow">
        <div id="workflowhead">
            <h1>CircuitPython Online IDE</h1>
        </div>
        <div id="workflowbody">
            <div id="workflowbodyleft">
                <h2>Workflow</h2>
                <h3><a href="https://learn.adafruit.com/welcome-to-circuitpython/installing-circuitpython" target="_blank">
                        Step 0. Install CircuitPython
                </a></h3>
                <button onClick='connect();' class="workflowstep">
                    <h3>Step 1. Connect Microcontroller</h3>
                </button>
                <br>
                <button onClick='open_folder();' class="workflowstep">
                    <h3>Step 2. Open CIRCUITPY dirctory</h3>
                </button>
                <br>
                <button onClick='check_conditions();' class="workflowstep">
                    <h3>Step 3. Start Coding</h3>
                </button>
                <hr>
                <h2>Contact</h2>
                Email: urfdvw@gmail.com
                <br>
                <a href="https://docs.google.com/forms/d/e/1FAIpQLSdupiJIRViFwPpuQC1hMp8gRvhxACLoAjgepm_-IRZumwK7Cg/viewform?usp=sf_link" target="_blank">
                    Feedback Survey
                </a> 
                <br>
                <a rel="me" href="https://fosstodon.org/@Riverwang" target="_blank">
                    Mastodon
                </a>
                <br>
                <a href="https://twitter.com/River___Wang" target="_blank">
                    Twitter
                </a> 
                <br>
                <a href="https://www.youtube.com/channel/UCeunCRTBkjHWynMl4I4le_A" target="_blank">
                    YouTube Channel
                </a> 
            </div>
            <div id="workflowbodyright">
                <h2>Quick Tutorial</h2>
                <iframe width="560" height="315" src="https://www.youtube.com/embed/h6ocRsDYTAs" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                <hr>
                <h2>Help</h2>
                This IDE supports <b>Chrome</b> or <b>Chromium</b>-based <b>desktop</b> browsers.
                <a href="https://developer.mozilla.org/en-US/docs/Web/API/Web_Serial_API#browser_compatibility" target="_blank">
                    (Why?)
                </a>
                <br>
                <a href="https://github.com/urfdvw/CircuitPython-online-IDE/#workflow-aka-how-to-use" target="_blank">
                    IDE Help infomation
                </a>
                <br>
                <a href="old_versions/V0.1/index.html" target="_blank">
                    Previous Version
                </a>
                <br>
                <a href="https://github.com/urfdvw/CircuitPython-online-IDE/" target="_blank">
                    GitHub Repository
                </a>
                <br>
                <a href="https://github.com/urfdvw/CircuitPython-online-IDE/releases" target="_blank">
                    Download the IDE and run offline
                </a>
            </div>
        </div>
        <div id="workflowtail">
            This open-source project is developed and maintained by <a href="https://github.com/urfdvw" target='_blank'>River Wang</a>,
            and published on GitHub Page under GPL 3 license. <br>
            <a href="https://circuitpython.org/" target='_blank'>CircuitPython</a>, which is a python version that runs on microcontrollers,
            is developed and maintained by <a href="https://www.adafruit.com/" target='_blank'>Adafruit</a>.
        </div>
    </div>
    <div id="flex-container">
        <div id="topbox" onpointerleave="console.log('left nav'); document.getElementById('nav_drop').href = 'style/navhide.css'">
            <nav>
                <ul>
                    <li><a class="neotext">
                        <b>CircuitPython Online IDE</b>
                    </a></li>
                    <li>
                        <a href="#" onclick="console.log('clicked nav'); document.getElementById('nav_drop').href = 'style/navshow.css'">
                            File
                        </a>
                        <ul>
                            <!-- <li><a href="#" onclick="open_folder();">Open Folder</a></li> -->
                            <li><a href="#" onclick="save_and_run();">Save and Run</a></li>
                            <li><a href="#" onclick="save_code_as();">Save as</a></li>
                            <li><a href="#" onclick="new_file_root();">New File in Root</a></li>
                            <li><a href="#" onclick="new_file_lib();">New File in lib/</a></li>
                            <li><a href="#" onclick="reload_folder_view();">Reload Folder View</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" onclick="console.log('clicked nav'); document.getElementById('nav_drop').href = 'style/navshow.css'" >
                            Serial
                        </a>
                        <ul>
                            <!-- <li><a id="connect" onClick='connect()' href="#">Connect serial</a></li> -->
                            <li><a href="#" onclick="sendCTRLC()">Send Ctrl C</a></li>
                            <li><a href="#" onclick="sendCTRLD()">Send Ctrl D</a></li>
                            <li><a href="#" onclick="save_log();">Download Serial Log</a></li>
                            <li><a href="#" onClick="serial.setValue('')">Clear Console</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" onclick="console.log('clicked nav'); document.getElementById('nav_drop').href = 'style/navshow.css'" >
                            Plot
                        </a>
                        <ul>
                            <li><a id="plot_button" onclick="plot_main()" href="#">Show Plot</a></li>
                            <li>
                                <a href="#" onclick="document.getElementById('x-axis').checked = !document.getElementById('x-axis').checked;plot_refresh();">Use 1st Col as X-Axis</a>
                                <input type="checkbox" id="x-axis" onchange="plot_refresh()">
                            </li>
                            <li><a href="#" onclick="load_plot_example();">Load Example</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" onclick="console.log('clicked nav'); document.getElementById('nav_drop').href = 'style/navshow.css'" >
                            Help
                        </a>
                        <ul>
                            <li><a href="https://github.com/urfdvw/CircuitPython-online-IDE/#workflow-aka-how-to-use" target="_blank" rel="noopener noreferrer">How to Use</a></li>
                            <!-- https://www.freecodecamp.org/news/how-to-use-html-to-open-link-in-new-tab/ -->
                            <li><a href="https://circuitpython.org/" target="_blank" rel="noopener noreferrer">CircuitPyton.org</a></li>
                            <li><a href="https://learn.adafruit.com/welcome-to-circuitpython" target="_blank" rel="noopener noreferrer">Adaftuit Tutorials</a></li>
                            <li><a href="#">About</a></li>
                            <li><a href="https://docs.google.com/forms/d/e/1FAIpQLSdupiJIRViFwPpuQC1hMp8gRvhxACLoAjgepm_-IRZumwK7Cg/viewform?usp=sf_link" target="_blank" rel="noopener noreferrer">Feedback</a></li>
                            <span title="Download this IDE to use locally">
                                <li><a href="https://github.com/urfdvw/CircuitPython-online-IDE/releases/" target="_blank" rel="noopener noreferrer">Download IDE</a></li>
                            </span>
                            <li>
                                <a class="github-button"
                                href="https://github.com/urfdvw/CircuitPython-online-IDE"
                                data-size="large"
                                data-show-count="true"
                                aria-label="Star urfdvw/CircuitPython-online-IDE on GitHub">
                                    IDE GitHub repo
                                </a>
                            </li>
                        </ul>
                    </li>
                    <li><a href="#" onclick="document.body.className = 'setting-open';">Settings</a></li>
                </ul>
            </nav>
        </div>
        <div id="mainbox">
            <div id="folderbox">
                <div id="foldercontainer"></div>
            </div>
            <div id="divider">
                <a id="dividertext" href="#" onclick="ToggleFolderDisplay();" >Hide Folder</a>
            </div>
            <div id="workareabox">
                <div id="editorbox">
                    <div class="toolbar" id="tabs">
                        Editor &nbsp;
                        <span title="Save and Run">
                            <img src="arts/SaveAndRun.png" onclick="save_and_run();" alt="SaveAndRun" style="width:25px;height: 25px;"> &nbsp;
                        </span>
                    </div>
                    <div id="editor"></div>
                </div>
                <div id="consolebox">
                    <div class="toolbar">
                        Serial Console &nbsp;
                        <span title="Send a `Ctrl-C` signal to the microcontroller">
                            <button onclick="sendCTRLC()">CTRL-C</button>
                        </span>
                        <span title="Send a `Ctrl-D` signal to the microcontroller">
                            <button onclick="sendCTRLD()">CTRL-D</button>
                        </span>
                    </div>
                    <div id='fixed_frame'>
                        <div id='dynamic_frame'>
                            <div id="serial_R">
                                <div id="serial"></div>
                            </div>
                            <code id="title_bar"></code>
                            <div id="serial_T" style="border: 1px solid grey; position:relative">
                                <div id="command"></div>
                                <button onclick="run_command(command);"
                                    style="position: absolute; bottom: 0; right: 0; z-index: 1">
                                    Send
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="setting">
        <h2>Settings</h2>
        <p>
            Nickname of board:
            <input id="name_setting">
        </p>
        <p>
            Layout:
            <select name="layout" id="layout_setting">
                <option value="0">◫</option>
                <option value="1">⊟</option>
            </select>
        </p>
        <p>
            Command Window:
            <select name="command" id="command_enter_setting">
                <option value="0">Enter to Send, Shift-Enter for Newline</option>
                <option value="1">Shift-Enter to Send, Enter for Newline</option>
            </select>
        </p>
        <p>
            Font Size:
            <input id="font_setting" type="number">
            pt
        </p>
    </div>
    <div id="cover"></div>

    <!-- script -->
    <script src="scripts/workflow.js"></script>
    <script src="scripts/settingdefault.js"></script>
    <script src="scripts/setting.js"></script>
    <script src="scripts/filesystem.js"></script>
    <script src="scripts/serial.js"></script>
    <script src="scripts/editor.js"></script>
    <script src="scripts/console.js"></script>
    <script src="scripts/command.js"></script>
    <script src="scripts/plot.js"></script>
    <script src="scripts/general.js"></script>
</body>
